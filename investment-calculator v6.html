<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Investment Future Value Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .calculator-body {
            padding: 40px;
        }

        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .input-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .frequency-group {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .frequency-option {
            flex: 1;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .frequency-option.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .currency-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .currency-option {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-weight: 500;
        }

        .currency-option.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .amount-in-words {
            font-size: 0.9em;
            color: #667eea;
            margin-top: 5px;
            font-weight: 500;
            min-height: 20px;
        }

        .amount-in-words.japanese {
            font-family: 'Meiryo', 'Yu Gothic', 'Hiragino Sans', sans-serif;
        }

        .calculate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 30px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .results-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-top: 20px;
            display: none;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .result-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }

        .result-words {
            font-size: 0.9em;
            color: #667eea;
            margin-top: 8px;
            font-weight: 500;
        }

        .result-words.japanese {
            font-family: 'Meiryo', 'Yu Gothic', 'Hiragino Sans', sans-serif;
        }

        .breakdown-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .breakdown-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            flex-wrap: wrap;
        }

        .breakdown-item:last-child {
            border-bottom: none;
            font-weight: bold;
            color: #667eea;
        }

        .breakdown-value {
            text-align: right;
        }

        .breakdown-words {
            font-size: 0.8em;
            color: #667eea;
            margin-top: 2px;
        }

        .breakdown-words.japanese {
            font-family: 'Meiryo', 'Yu Gothic', 'Hiragino Sans', sans-serif;
        }

        .info-tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
        }

        .info-tooltip::after {
            content: "ℹ️";
            font-size: 0.9em;
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #2c3e50;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
        }

        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }

        @media (max-width: 768px) {
            .calculator-body {
                padding: 20px;
            }
            
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }

            .currency-group {
                grid-template-columns: repeat(2, 1fr);
            }

            .breakdown-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .breakdown-value {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Investment Future Value Calculator</h1>
            <p>Calculate your investment's future value with compound interest, taxes, and inflation</p>
        </div>
        
        <div class="calculator-body">
            <div class="input-section">
                <div class="input-group">
                    <label>
                        Select Currency
                        <span class="info-tooltip">
                            <span class="tooltip-text">Choose your preferred currency for calculations</span>
                        </span>
                    </label>
                    <div class="currency-group">
                        <div class="currency-option active" data-currency="INR" data-symbol="₹">₹ INR</div>
                        <div class="currency-option" data-currency="USD" data-symbol="$">$ USD</div>
                        <div class="currency-option" data-currency="EUR" data-symbol="€">€ EUR</div>
                        <div class="currency-option" data-currency="JPY" data-symbol="¥">¥ JPY</div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="initialInvestment">
                        Initial Lump Sum Investment (<span id="initialCurrencySymbol">₹</span>)
                        <span class="info-tooltip">
                            <span class="tooltip-text">The amount you can invest today as a one-time payment</span>
                        </span>
                    </label>
                    <input type="text" id="initialInvestment" placeholder="1,00,000" oninput="formatNumberInput(this); updateAmountInWords('initialInvestment', 'initialWords')">
                    <div class="amount-in-words" id="initialWords"></div>
                </div>

                <div class="input-group">
                    <label for="recurringAmount">
                        Recurring Investment Amount (<span id="recurringCurrencySymbol">₹</span>)
                        <span class="info-tooltip">
                            <span class="tooltip-text">Amount you plan to invest regularly</span>
                        </span>
                    </label>
                    <input type="text" id="recurringAmount" placeholder="10,000" oninput="formatNumberInput(this); updateAmountInWords('recurringAmount', 'recurringWords')">
                    <div class="amount-in-words" id="recurringWords"></div>
                    <div class="frequency-group">
                        <div class="frequency-option active" data-frequency="monthly">Monthly</div>
                        <div class="frequency-option" data-frequency="yearly">Yearly</div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="investmentDuration">
                        Investment Duration (Years)
                        <span class="info-tooltip">
                            <span class="tooltip-text">Number of years you plan to make regular investments</span>
                        </span>
                    </label>
                    <input type="number" id="investmentDuration" placeholder="10" min="1" max="50">
                </div>

                <div class="input-group">
                    <label for="holdingPeriod">
                        Total Holding Period (Years)
                        <span class="info-tooltip">
                            <span class="tooltip-text">Total years to hold investments (must be at least equal to investment duration)</span>
                        </span>
                    </label>
                    <input type="number" id="holdingPeriod" placeholder="15" min="1" max="50">
                    <div class="error-message" id="holdingPeriodError">
                        Holding period must be at least equal to investment duration
                    </div>
                </div>

                <div class="input-group">
                    <label for="annualReturn">
                        Expected Annual Rate of Return (%)
                        <span class="info-tooltip">
                            <span class="tooltip-text">Expected annual return before taxes and inflation</span>
                        </span>
                    </label>
                    <input type="number" id="annualReturn" placeholder="12" min="0" max="30" step="0.1">
                </div>

                <div class="input-group">
                    <label for="taxRate">
                        Tax Rate (%)
                        <span class="info-tooltip">
                            <span class="tooltip-text">Tax rate applied to investment gains</span>
                        </span>
                    </label>
                    <input type="number" id="taxRate" placeholder="10" min="0" max="50" step="0.1">
                </div>

                <div class="input-group">
                    <label for="inflationRate">
                        Inflation Rate (%)
                        <span class="info-tooltip">
                            <span class="tooltip-text">Expected annual inflation rate</span>
                        </span>
                    </label>
                    <input type="number" id="inflationRate" placeholder="6" min="0" max="15" step="0.1">
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateInvestment()">Calculate Now</button>

            <div class="results-section" id="resultsSection">
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Future Value (Nominal)</h3>
                        <div class="result-value" id="futureValueNominal">₹0</div>
                        <div class="result-words" id="futureValueNominalWords"></div>
                    </div>
                    <div class="result-card">
                        <h3>Future Value (Real)</h3>
                        <div class="result-value" id="futureValueReal">₹0</div>
                        <div class="result-words" id="futureValueRealWords"></div>
                    </div>
                    <div class="result-card">
                        <h3>Total Contributions</h3>
                        <div class="result-value" id="totalContributions">₹0</div>
                        <div class="result-words" id="totalContributionsWords"></div>
                    </div>
                    <div class="result-card">
                        <h3>Total Gains</h3>
                        <div class="result-value" id="totalGains">₹0</div>
                        <div class="result-words" id="totalGainsWords"></div>
                    </div>
                </div>

                <div class="breakdown-section">
                    <h3>Detailed Breakdown</h3>
                    <div class="breakdown-item">
                        <span>Initial Investment:</span>
                        <div class="breakdown-value">
                            <span id="breakdownInitial">₹0</span>
                            <div class="breakdown-words" id="breakdownInitialWords"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <span>Total Recurring Contributions:</span>
                        <div class="breakdown-value">
                            <span id="breakdownRecurring">₹0</span>
                            <div class="breakdown-words" id="breakdownRecurringWords"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <span>Gross Investment Gains:</span>
                        <div class="breakdown-value">
                            <span id="breakdownGrossGains">₹0</span>
                            <div class="breakdown-words" id="breakdownGrossGainsWords"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <span>Taxes on Gains:</span>
                        <div class="breakdown-value">
                            <span id="breakdownTaxes">₹0</span>
                            <div class="breakdown-words" id="breakdownTaxesWords"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <span>Net Investment Gains:</span>
                        <div class="breakdown-value">
                            <span id="breakdownNetGains">₹0</span>
                            <div class="breakdown-words" id="breakdownNetGainsWords"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <span>Final Value (After Tax):</span>
                        <div class="breakdown-value">
                            <span id="breakdownFinalValue">₹0</span>
                            <div class="breakdown-words" id="breakdownFinalValueWords"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <span>Real Value (Inflation Adjusted):</span>
                        <div class="breakdown-value">
                            <span id="breakdownRealValue">₹0</span>
                            <div class="breakdown-words" id="breakdownRealValueWords"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedFrequency = 'monthly';
        let selectedCurrency = 'INR';
        let currencySymbol = '₹';

        // Currency configuration
        const currencyConfig = {
            'INR': {
                symbol: '₹',
                locale: 'en-IN',
                defaultInitial: '100000', // Changed to raw number for easier parsing
                defaultRecurring: '10000', // Changed to raw number
                defaultReturn: '12',
                defaultTax: '10',
                defaultInflation: '6'
            },
            'USD': {
                symbol: '$',
                locale: 'en-US',
                defaultInitial: '10000', // Changed to raw number
                defaultRecurring: '1000', // Changed to raw number
                defaultReturn: '8',
                defaultTax: '20',
                defaultInflation: '3'
            },
            'EUR': {
                symbol: '€',
                locale: 'de-DE',
                defaultInitial: '10000', // Changed to raw number
                defaultRecurring: '1000', // Changed to raw number
                defaultReturn: '7',
                defaultTax: '25',
                defaultInflation: '2'
            },
            'JPY': {
                symbol: '¥',
                locale: 'ja-JP',
                defaultInitial: '1000000', // Changed to raw number
                defaultRecurring: '100000', // Changed to raw number
                defaultReturn: '5',
                defaultTax: '20',
                defaultInflation: '1'
            }
        };

        // Format number input with commas
        function formatNumberInput(input) {
            let value = input.value.replace(/,/g, '');
            if (value && !isNaN(value)) {
                input.value = parseFloat(value).toLocaleString('en-US');
            }
        }

        // Convert number to words based on currency
        function numberToWords(amount) {
            if (!amount || amount === 0) return '';
            
            const num = Math.abs(amount);
            
            if (selectedCurrency === 'INR') {
                return convertToIndianWords(num);
            } else if (selectedCurrency === 'JPY') {
                return convertToJapaneseWords(num);
            } else {
                return convertToWesternWords(num);
            }
        }

        // Indian number system (Crore, Lakh)
        function convertToIndianWords(num) {
            if (num >= 10000000) {
                const crores = Math.floor(num / 10000000);
                const remainder = num % 10000000;
                let result = crores + (crores === 1 ? ' Crore' : ' Crores');
                if (remainder >= 100000) {
                    const lakhs = Math.floor(remainder / 100000);
                    result += ' ' + lakhs + (lakhs === 1 ? ' Lakh' : ' Lakhs');
                }
                return result + ' Rupees';
            } else if (num >= 100000) {
                const lakhs = Math.floor(num / 100000);
                const remainder = num % 100000;
                let result = lakhs + (lakhs === 1 ? ' Lakh' : ' Lakhs');
                if (remainder >= 1000) {
                    const thousands = Math.floor(remainder / 1000);
                    result += ' ' + thousands + ' Thousand';
                }
                return result + ' Rupees';
            } else if (num >= 1000) {
                const thousands = Math.floor(num / 1000);
                return thousands + ' Thousand Rupees';
            } else {
                return Math.floor(num) + ' Rupees';
            }
        }

        // Western number system (Million, Billion)
        function convertToWesternWords(num) {
            const currency = selectedCurrency === 'USD' ? 'Dollars' : 'Euros';
            
            if (num >= 1000000000) {
                const billions = (num / 1000000000).toFixed(1);
                return billions + ' Billion ' + currency;
            } else if (num >= 1000000) {
                const millions = (num / 1000000).toFixed(1);
                return millions + ' Million ' + currency;
            } else if (num >= 1000) {
                const thousands = (num / 1000).toFixed(1);
                return thousands + ' Thousand ' + currency;
            } else {
                return Math.floor(num) + ' ' + currency;
            }
        }

        // Japanese number system
        function convertToJapaneseWords(num) {
            if (num >= 100000000) {
                const oku = Math.floor(num / 100000000);
                const remainder = num % 100000000;
                let result = oku + '億';
                if (remainder >= 10000) {
                    const man = Math.floor(remainder / 10000);
                    result += man + '万';
                }
                return result + '円';
            } else if (num >= 10000) {
                const man = Math.floor(num / 10000);
                return man + '万円';
            } else {
                return Math.floor(num) + '円';
            }
        }

        // Update amount in words
        function updateAmountInWords(inputId, wordsId) {
            const input = document.getElementById(inputId);
            const wordsElement = document.getElementById(wordsId);
            const value = parseFloat(input.value.replace(/,/g, '')) || 0;
            
            wordsElement.textContent = numberToWords(value);
            wordsElement.className = 'amount-in-words' + (selectedCurrency === 'JPY' ? ' japanese' : '');
        }

        // Handle currency selection
        document.querySelectorAll('.currency-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.currency-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                selectedCurrency = this.dataset.currency;
                currencySymbol = this.dataset.symbol;
                
                // Update currency symbols in labels
                document.getElementById('initialCurrencySymbol').textContent = currencySymbol;
                document.getElementById('recurringCurrencySymbol').textContent = currencySymbol;
                
                // Update placeholder values based on currency
                const config = currencyConfig[selectedCurrency];
                document.getElementById('initialInvestment').placeholder = parseFloat(config.defaultInitial).toLocaleString('en-US');
                document.getElementById('recurringAmount').placeholder = parseFloat(config.defaultRecurring).toLocaleString('en-US');
                document.getElementById('annualReturn').placeholder = config.defaultReturn;
                document.getElementById('taxRate').placeholder = config.defaultTax;
                document.getElementById('inflationRate').placeholder = config.defaultInflation;
                
                // Update existing amount in words
                updateAmountInWords('initialInvestment', 'initialWords');
                updateAmountInWords('recurringAmount', 'recurringWords');
            });
        });

        // Handle frequency selection
        document.querySelectorAll('.frequency-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.frequency-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                selectedFrequency = this.dataset.frequency;
            });
        });

        // Validate holding period
        function validateHoldingPeriod() {
            const investmentDuration = parseInt(document.getElementById('investmentDuration').value) || 0;
            const holdingPeriod = parseInt(document.getElementById('holdingPeriod').value) || 0;
            const errorElement = document.getElementById('holdingPeriodError');
            
            if (holdingPeriod > 0 && investmentDuration > 0 && holdingPeriod < investmentDuration) {
                errorElement.style.display = 'block';
                return false;
            } else {
                errorElement.style.display = 'none';
                return true;
            }
        }

        // Add event listeners for validation
        document.getElementById('investmentDuration').addEventListener('input', validateHoldingPeriod);
        document.getElementById('holdingPeriod').addEventListener('input', validateHoldingPeriod);

        function calculateInvestment() {
            const currentConfig = currencyConfig[selectedCurrency];

            // Get input values, use placeholders as default if empty
            const initialInvestmentInput = document.getElementById('initialInvestment').value.replace(/,/g, '');
            const initialInvestment = parseFloat(initialInvestmentInput) || parseFloat(currentConfig.defaultInitial);

            const recurringAmountInput = document.getElementById('recurringAmount').value.replace(/,/g, '');
            const recurringAmount = parseFloat(recurringAmountInput) || parseFloat(currentConfig.defaultRecurring);
            
            const investmentDuration = parseInt(document.getElementById('investmentDuration').value) || 
                                     parseInt(document.getElementById('investmentDuration').placeholder);
            
            const holdingPeriod = parseInt(document.getElementById('holdingPeriod').value) || 
                                  parseInt(document.getElementById('holdingPeriod').placeholder);
            
            const annualReturn = (parseFloat(document.getElementById('annualReturn').value) || parseFloat(currentConfig.defaultReturn)) / 100;
            const taxRate = (parseFloat(document.getElementById('taxRate').value) || parseFloat(currentConfig.defaultTax)) / 100;
            const inflationRate = (parseFloat(document.getElementById('inflationRate').value) || parseFloat(currentConfig.defaultInflation)) / 100;

            // Validate inputs
            if (investmentDuration <= 0) {
                alert('Please enter a valid investment duration.');
                return;
            }

            if (holdingPeriod < investmentDuration) {
                alert('Holding period must be at least equal to investment duration.');
                return;
            }

            // Calculate additional holding years after investment period
            const additionalHoldingYears = holdingPeriod - investmentDuration;

            // Calculate contributions
            const periodsPerYear = selectedFrequency === 'monthly' ? 12 : 1;
            const totalRecurringContributions = recurringAmount * periodsPerYear * investmentDuration;
            const totalContributions = initialInvestment + totalRecurringContributions;

            // Calculate future value with compound interest
            let futureValue = 0;

            // Future value of initial lump sum
            futureValue += initialInvestment * Math.pow(1 + annualReturn, holdingPeriod);

            // Future value of recurring investments
            if (recurringAmount > 0) {
                const monthlyReturn = Math.pow(1 + annualReturn, 1/12) - 1;
                const periodicReturn = selectedFrequency === 'monthly' ? monthlyReturn : annualReturn;
                
                // Calculate future value of annuity during investment period
                const annuityFV = recurringAmount * (Math.pow(1 + periodicReturn, periodsPerYear * investmentDuration) - 1) / periodicReturn;
                
                // Compound this value for the additional holding period
                futureValue += annuityFV * Math.pow(1 + annualReturn, additionalHoldingYears);
            }

            // Calculate taxes
            const grossGains = futureValue - totalContributions;
            const taxes = Math.max(0, grossGains * taxRate);
            const netFutureValue = futureValue - taxes;
            const netGains = grossGains - taxes;

            // Calculate real value (inflation-adjusted)
            const realValue = netFutureValue / Math.pow(1 + inflationRate, holdingPeriod);

            // Display results with words
            displayResultWithWords('futureValueNominal', 'futureValueNominalWords', netFutureValue);
            displayResultWithWords('futureValueReal', 'futureValueRealWords', realValue);
            displayResultWithWords('totalContributions', 'totalContributionsWords', totalContributions);
            displayResultWithWords('totalGains', 'totalGainsWords', netGains);

            // Display breakdown with words
            displayBreakdownWithWords('breakdownInitial', 'breakdownInitialWords', initialInvestment);
            displayBreakdownWithWords('breakdownRecurring', 'breakdownRecurringWords', totalRecurringContributions);
            displayBreakdownWithWords('breakdownGrossGains', 'breakdownGrossGainsWords', grossGains);
            displayBreakdownWithWords('breakdownTaxes', 'breakdownTaxesWords', taxes);
            displayBreakdownWithWords('breakdownNetGains', 'breakdownNetGainsWords', netGains);
            displayBreakdownWithWords('breakdownFinalValue', 'breakdownFinalValueWords', netFutureValue);
            displayBreakdownWithWords('breakdownRealValue', 'breakdownRealValueWords', realValue);

            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function displayResultWithWords(valueId, wordsId, amount) {
            document.getElementById(valueId).textContent = formatCurrency(amount);
            const wordsElement = document.getElementById(wordsId);
            wordsElement.textContent = numberToWords(amount);
            wordsElement.className = 'result-words' + (selectedCurrency === 'JPY' ? ' japanese' : '');
        }

        function displayBreakdownWithWords(valueId, wordsId, amount) {
            document.getElementById(valueId).textContent = formatCurrency(amount);
            const wordsElement = document.getElementById(wordsId);
            wordsElement.textContent = numberToWords(amount);
            wordsElement.className = 'breakdown-words' + (selectedCurrency === 'JPY' ? ' japanese' : '');
        }

        function formatCurrency(amount) {
            const config = currencyConfig[selectedCurrency];
            return new Intl.NumberFormat(config.locale, {
                style: 'currency',
                currency: selectedCurrency,
                minimumFractionDigits: selectedCurrency === 'JPY' ? 0 : 0,
                maximumFractionDigits: selectedCurrency === 'JPY' ? 0 : 0
            }).format(amount);
        }

        // Add enter key support for calculation
        document.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                calculateInvestment();
            }
        });

        // Initialize amount in words on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial placeholder values as default input values for amounts
            document.getElementById('initialInvestment').value = parseFloat(currencyConfig[selectedCurrency].defaultInitial).toLocaleString('en-US');
            document.getElementById('recurringAmount').value = parseFloat(currencyConfig[selectedCurrency].defaultRecurring).toLocaleString('en-US');
            
            // Set initial placeholder values as default input values for numeric fields
            document.getElementById('investmentDuration').value = document.getElementById('investmentDuration').placeholder;
            document.getElementById('holdingPeriod').value = document.getElementById('holdingPeriod').placeholder;
            document.getElementById('annualReturn').value = currencyConfig[selectedCurrency].defaultReturn;
            document.getElementById('taxRate').value = currencyConfig[selectedCurrency].defaultTax;
            document.getElementById('inflationRate').value = currencyConfig[selectedCurrency].defaultInflation;


            updateAmountInWords('initialInvestment', 'initialWords');
            updateAmountInWords('recurringAmount', 'recurringWords');
        });
    </script>
</body>
</html>